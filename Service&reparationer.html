<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Service & Reparation ‚Äì CKS Bil & Motor</title>
  <meta name="description" content="Service och reparation i Uppsala. Trygg verkstad med tydlig √•terkoppling, pris innan start och 1 √•rs garanti p√• nya delar." />
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

  <!-- Header injectas -->
  <div id="site-header"></div>

  <main class="cks-svcPage">
    <div class="wrap cks-svcWrap">

      <!-- HERO -->
      <section class="cks-svcHero" aria-label="Service och reparation hero">
        <div class="cks-svcHeroInner">
          <div class="cks-svcKicker">üîß Bilreparationer & Service</div>

          <h1 class="cks-svcTitle">Trygg service f√∂r alla bilm√§rken</h1>
          <p class="cks-svcSub">
            Vi utf√∂r service, reparationer och fels√∂kning oavsett √•rsmodell.
            Vi f√∂ljer tillverkarens rekommendationer ‚Äì och <b>√•terkommer alltid med pris & tid</b> innan vi k√∂r ig√•ng.
          </p>

          <div class="cks-svcBadges">
            <div class="cks-svcBadge"><span class="cks-svcDot"></span> 1 √•rs garanti p√• nya reservdelar</div>
            <div class="cks-svcBadge"><span class="cks-svcDot"></span> Tydlig √•terkoppling</div>
            <div class="cks-svcBadge"><span class="cks-svcDot"></span> Service enligt specifikation</div>
          </div>
        </div>

        <div class="cks-svcGlow" aria-hidden="true"></div>
      </section>

      <!-- GRID -->
      <section class="cks-svcGrid" aria-label="Service och reparation inneh√•ll">
        <!-- LEFT -->
        <div class="cks-svcCard">

          <h2 class="cks-svcH2">S√• g√•r det till</h2>
          <div class="cks-svcLine"></div>

          <div class="cks-svcFlow" role="list">
            <div class="cks-svcStep" role="listitem">
              <div class="cks-svcNum">1</div>
              <div>
                <b>Skicka in f√∂rfr√•gan</b>
                <span>Regnr + vad du beh√∂ver hj√§lp med. Ju tydligare, desto snabbare svar.</span>
              </div>
            </div>

            <div class="cks-svcStep" role="listitem">
              <div class="cks-svcNum">2</div>
              <div>
                <b>Vi granskar & √•terkopplar</b>
                <span>Du f√•r pris och tid. Inget bokas utan ditt OK.</span>
              </div>
            </div>

            <div class="cks-svcStep" role="listitem">
              <div class="cks-svcNum">3</div>
              <div>
                <b>Service / reparation</b>
                <span>Vi utf√∂r jobbet enligt tillverkarens rekommendationer med fokus p√• kvalitet.</span>
              </div>
            </div>
          </div>

          <div class="cks-svcBlock">
            <h2 class="cks-svcH2">D√§rf√∂r ska du v√§lja oss</h2>
            <div class="cks-svcLine"></div>

            <div class="cks-svcTiles">
              <div class="cks-svcTile">
                <div class="cks-svcIc">üìò</div>
                <div><b>Service enligt specifikation</b><span>Vi f√∂ljer bilens serviceprogram f√∂r b√§sta resultat.</span></div>
              </div>

              <div class="cks-svcTile">
                <div class="cks-svcIc">üë®‚Äçüîß</div>
                <div><b>Erfaren verkstad</b><span>Kompetens inom b√•de mekanik och avancerad fels√∂kning.</span></div>
              </div>

              <div class="cks-svcTile">
                <div class="cks-svcIc">üõ°Ô∏è</div>
                <div><b>1 √•rs garanti</b><span>P√• nya reservdelar som k√∂ps av oss.</span></div>
              </div>

              <div class="cks-svcTile">
                <div class="cks-svcIc">‚úÖ</div>
                <div><b>Tydlig kommunikation</b><span>Du f√•r alltid pris & tid innan vi startar arbetet.</span></div>
              </div>
            </div>
          </div>

          <div class="cks-svcBlock">
            <h2 class="cks-svcH2">Vanliga √§renden</h2>
            <div class="cks-svcLine"></div>
            <p class="cks-svcP">
              Service, bromsar, fels√∂kning, oljel√§ckage, motorlampa, AC, batteri, startproblem,
              ljud/vibrationer ‚Äì skriv vad du m√§rker s√• guidar vi dig r√§tt.
            </p>
          </div>

        </div>

        <!-- RIGHT -->
        <aside class="cks-svcSide" aria-label="Skicka f√∂rfr√•gan">
          <h3>Skicka en f√∂rfr√•gan</h3>
          <p>Vi √•terkommer med <b>pris & tid</b> s√• snart vi kan.</p>

          <!-- Statisk demo: visar modal ‚ÄúSkickat!‚Äù -->
          <form id="cksServiceForm" class="cks-svcForm" novalidate>
            <div class="cks-svcRow">
              <input type="text" name="namn" placeholder="Ditt namn" required>
              <input type="email" name="epost" placeholder="Din e-post" required>
            </div>

            <div class="cks-svcRow">
              <input type="text" name="telefon" placeholder="Telefon (valfritt)">
              <input
                type="text"
                name="regnr"
                id="cksRegnrService"
                placeholder="Regnr (ABC123 / ABC12A)"
                required
                autocomplete="off"
                autocapitalize="characters"
                maxlength="6"
                pattern="^[A-Za-z]{3}[0-9]{2}[0-9A-Za-z]{1}$"
                title="Skriv regnummer som ABC123 eller ABC12A (3 bokst√§ver + 3 tecken, sista kan vara bokstav).">
            </div>

            <select name="tjanst" required>
              <option value="" selected disabled>V√§lj typ av √§rende‚Ä¶</option>
              <option>Service</option>
              <option>Reparation</option>
              <option>Fels√∂kning</option>
              <option>Bromsar</option>
              <option>AC / Klimat</option>
              <option>√ñvrigt</option>
            </select>

            <input type="text" name="matarstallning" placeholder="M√§tarst√§llning (mil)">

            <textarea name="meddelande" placeholder="Beskriv problemet kort (t.ex. ljud, varningslampa, n√§r det h√§nder)..." required></textarea>

            <button class="cks-svcBtn" type="submit" id="cksServiceBtn">
              <span class="cks-svcSpinner" id="cksServiceSpin"></span>
              <span id="cksServiceBtnText">Skicka</span>
            </button>

            <div class="cks-svcMini">
              ‚úâÔ∏è Skickas till <b>info@cksbil.se</b><br>
              üìû <a class="cks-svcPhone" href="tel:0762948775">076 ‚Äì 294 87 75</a>
            </div>
          </form>

          <div class="cks-svcMap">
            <iframe
              title="CKS Bil & Motor karta"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=Grafikgatan%2029%2C%20754%2054%20Uppsala&output=embed">
            </iframe>
          </div>
        </aside>
      </section>

    </div>
  </main>

  <!-- SUCCESS MODAL -->
  <div id="cksServiceOk" class="cks-svcModal" aria-hidden="true">
    <div class="cks-svcBox" role="dialog" aria-modal="true" aria-label="Skickat">
      <div class="cks-svcCheck">‚úì</div>
      <h3>Skickat!</h3>
      <p>Tack! Vi har tagit emot din f√∂rfr√•gan.<br>Vi √•terkommer med pris & tid s√• snart vi kan.</p>
      <button type="button" class="cks-svcClose" data-close="cksServiceOk">St√§ng</button>
    </div>
  </div>

  <!-- ERROR MODAL (finns kvar om du vill √•terkoppla fel senare) -->
  <div id="cksServiceErr" class="cks-svcModal" aria-hidden="true">
    <div class="cks-svcBox" role="dialog" aria-modal="true" aria-label="Kunde inte skicka">
      <div class="cks-svcWarn">!</div>
      <h3>Kunde inte skicka</h3>
      <p id="cksServiceErrText">Testa igen eller ring oss.</p>
      <button type="button" class="cks-svcClose" data-close="cksServiceErr">St√§ng</button>
    </div>
  </div>

  <!-- Footer injectas -->
  <div id="site-footer"></div>

  <script src="./include.js"></script>
  <script src="./app.js"></script>

  <script>
    (function(){
      const form = document.getElementById('cksServiceForm');
      const reg  = document.getElementById('cksRegnrService');
      const btn  = document.getElementById('cksServiceBtn');
      const spin = document.getElementById('cksServiceSpin');
      const btnText = document.getElementById('cksServiceBtnText');

      const okModal  = document.getElementById('cksServiceOk');
      const errModal = document.getElementById('cksServiceErr');

      // Uppercase regnr live
      if(reg){
        reg.addEventListener('input', () => {
          reg.value = reg.value.replace(/\s+/g,'').toUpperCase();
        });
      }

      function setLoading(on){
        if(!btn || !spin || !btnText) return;
        btn.disabled = !!on;
        spin.style.display = on ? 'inline-block' : 'none';
        btnText.textContent = on ? 'Skickar‚Ä¶' : 'Skicka';
      }

      function openModal(m){
        if(!m) return;
        m.style.display = 'flex';
        m.setAttribute('aria-hidden','false');
      }
      function closeModal(m){
        if(!m) return;
        m.style.display = 'none';
        m.setAttribute('aria-hidden','true');
      }

      // Close modals
      document.addEventListener('click', (e) => {
        const closeId = e.target && e.target.getAttribute && e.target.getAttribute('data-close');
        if(closeId){
          closeModal(document.getElementById(closeId));
          return;
        }
        if(e.target === okModal) closeModal(okModal);
        if(e.target === errModal) closeModal(errModal);
      });

      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape'){
          closeModal(okModal);
          closeModal(errModal);
        }
      });

      if(!form) return;

      form.addEventListener('submit', function(e){
        e.preventDefault();

        if(!form.checkValidity()){
          form.reportValidity();
          return;
        }

        // Statisk: visa OK direkt
        setLoading(true);
        setTimeout(() => {
          setLoading(false);
          openModal(okModal);
          form.reset();
        }, 400);
      });
    })();
  </script>

</body>
</html>
