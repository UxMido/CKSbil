<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Avancerad bilelektronik ‚Äì CKS Bil & Motor</title>
  <meta name="description" content="Avancerad bilelektronik & fels√∂kning i Uppsala. Diagnos, felkoder, m√§tning och √•tg√§rdsplan ‚Äì vi √•terkommer med pris & tid." />
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

  <!-- Header injectas -->
  <div id="site-header"></div>

  <main class="cks-elecPage">
    <div class="wrap cks-elecWrap">

      <!-- HERO -->
      <section class="cks-elecHero" aria-label="Avancerad bilelektronik hero">
        <div class="cks-elecHeroInner">
          <div class="cks-elecKicker">‚ö° Avancerad bilelektronik</div>

          <h1 class="cks-elecTitle">Diagnos & fels√∂kning ‚Äì vi hittar felet, inte bara felkoden</h1>

          <p class="cks-elecSub">
            Skicka in regnr + √§rende s√• √•terkopplar vi med <b>pris</b> och <b>tid</b>.
            Inget bokas utan ditt OK.
          </p>

          <div class="cks-elecBadges" role="list">
            <div class="cks-elecBadge" role="listitem"><span class="cks-elecDot"></span> Tydlig √•tg√§rdsplan</div>
            <div class="cks-elecBadge" role="listitem"><span class="cks-elecDot"></span> M√§tning + provk√∂rning vid behov</div>
            <div class="cks-elecBadge" role="listitem"><span class="cks-elecDot"></span> Fokus p√• kvalitet</div>
          </div>
        </div>

        <!-- Subtil animation ‚Äúelectric sweep‚Äù -->
        <div class="cks-elecSweep" aria-hidden="true"></div>
        <div class="cks-elecGridGlow" aria-hidden="true"></div>
      </section>

      <!-- GRID -->
      <section class="cks-elecGrid" aria-label="Avancerad bilelektronik inneh√•ll">

        <!-- LEFT -->
        <div class="cks-elecCard">
          <h2 class="cks-elecH2">S√• g√•r det till</h2>
          <div class="cks-elecLine"></div>

          <div class="cks-elecSteps">
            <div class="cks-elecStep">
              <div class="cks-elecStepNr">1</div>
              <div>
                <b>Skicka in f√∂rfr√•gan</b>
                <span>Regnr + symtom. Ju tydligare du beskriver, desto snabbare svar.</span>
              </div>
            </div>

            <div class="cks-elecStep">
              <div class="cks-elecStepNr">2</div>
              <div>
                <b>Vi granskar & √•terkopplar</b>
                <span>Du f√•r f√∂rslag p√• pris och tid. Inget bokas utan ditt OK.</span>
              </div>
            </div>

            <div class="cks-elecStep">
              <div class="cks-elecStepNr">3</div>
              <div>
                <b>Diagnos / √•tg√§rd</b>
                <span>Vi fels√∂ker metodiskt (logik, m√§tning, test) och ger tydlig plan.</span>
              </div>
            </div>
          </div>

          <div class="cks-elecBlock">
            <h2 class="cks-elecH2">D√§rf√∂r v√§ljer kunder oss</h2>
            <div class="cks-elecLine"></div>

            <div class="cks-elecFeatures">
              <div class="cks-elecFeat">
                <div class="cks-elecIc">üß†</div>
                <div><b>Metodisk fels√∂kning</b><span>Vi f√∂ljer sp√•r, inte gissningar.</span></div>
              </div>
              <div class="cks-elecFeat">
                <div class="cks-elecIc">üß∞</div>
                <div><b>R√§tt verktyg</b><span>Diagnos, m√§tning, test & provk√∂rning.</span></div>
              </div>
              <div class="cks-elecFeat">
                <div class="cks-elecIc">üìù</div>
                <div><b>Tydlig √•terkoppling</b><span>Du f√•r plan och pris innan vi k√∂r vidare.</span></div>
              </div>
              <div class="cks-elecFeat">
                <div class="cks-elecIc">‚ö°</div>
                <div><b>Komplexa elfel</b><span>Startproblem, batteridr√§nering, sensorer, CAN mm.</span></div>
              </div>
            </div>
          </div>

          <div class="cks-elecBlock">
            <h2 class="cks-elecH2">Vanliga √§renden</h2>
            <div class="cks-elecLine"></div>
            <p class="cks-elecP">
              Motorlampa, intermittent fel, startproblem, batteridr√§nering, laddsystem, ABS/ESP, airbag-varning,
              komfortel, sensorer, kommunikationsfel (CAN), felkoder som kommer tillbaka.
            </p>
          </div>
        </div>

        <!-- RIGHT -->
        <aside class="cks-elecSide" aria-label="Skicka f√∂rfr√•gan">
          <h3>Skicka en f√∂rfr√•gan</h3>
          <p>Vi √•terkommer med <b>pris & tid</b> s√• snart vi kan.</p>

          <!-- DEMO: visar ‚ÄúSkickat!‚Äù modal (skickar inte e-post √§nnu) -->
          <form id="cksElecForm" class="cks-elecForm">
            <!-- honeypot -->
            <input type="text" name="website" autocomplete="off" tabindex="-1"
              style="position:absolute;left:-9999px;opacity:0;height:0;width:0">

            <div class="cks-elecRow2">
              <input type="text" name="name" placeholder="Ditt namn" required>
              <input type="email" name="email" placeholder="Din e-post" required>
            </div>

            <div class="cks-elecRow2">
              <input type="text" name="phone" placeholder="Telefon (valfritt)">
              <input
                type="text"
                name="regnr"
                id="elecRegnr"
                placeholder="Regnr (ABC123 / ABC12A)"
                required
                autocomplete="off"
                autocapitalize="characters"
                maxlength="6"
                pattern="^[A-Za-z]{3}[0-9]{2}[0-9A-Za-z]{1}$"
                title="Skriv regnummer som ABC123 eller ABC12A (3 bokst√§ver + 3 tecken, sista kan vara bokstav).">
            </div>

            <input type="text" name="subject" placeholder="√Ñmne (t.ex. motorlampa, startproblem‚Ä¶)" required>

            <select name="category" required>
              <option value="" selected>V√§lj typ av √§rende‚Ä¶</option>
              <option>Diagnos / Felkoder</option>
              <option>Startproblem</option>
              <option>Batteridr√§nering</option>
              <option>ABS / ESP</option>
              <option>Airbag / SRS</option>
              <option>Komfortel</option>
              <option>CAN / Kommunikationsfel</option>
              <option>√ñvrigt</option>
            </select>

            <textarea name="message" placeholder="Beskriv felet: n√§r h√§nder det, hur ofta, vad har du testat?" required></textarea>

            <button class="cks-elecBtn" id="elecBtn" type="submit">
              <span class="cks-elecSpinner" id="elecSpin" aria-hidden="true"></span>
              <span id="elecBtnText">Skicka</span>
            </button>

            <div class="cks-elecHint">
              ‚úÖ Till <b>info@cksbil.se</b><br>
              üìû <a class="cks-elecPhone" href="tel:0762948775">076 ‚Äì 294 87 75</a>
            </div>
          </form>

          <div class="cks-elecMap">
            <iframe
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=Grafikgatan%2021%2C%20754%2054%20Uppsala&output=embed">
            </iframe>
          </div>
        </aside>

      </section>
    </div>
  </main>

  <!-- OK MODAL -->
  <div id="cksElecOk" class="cks-elecModal" aria-hidden="true">
    <div class="cks-elecModalBox" role="dialog" aria-modal="true" aria-label="Skickat">
      <div class="cks-elecCheck">‚úì</div>
      <h3>Skickat!</h3>
      <p>Tack! Vi har tagit emot din f√∂rfr√•gan.<br>Vi √•terkommer med pris & tid s√• snart vi kan.</p>
      <button type="button" class="cks-elecModalClose" data-close="cksElecOk">St√§ng</button>
    </div>
  </div>

  <!-- ERROR MODAL -->
  <div id="cksElecErr" class="cks-elecModal" aria-hidden="true">
    <div class="cks-elecModalBox" role="dialog" aria-modal="true" aria-label="Kunde inte skicka">
      <div class="cks-elecWarn">!</div>
      <h3>Kunde inte skicka</h3>
      <p id="cksElecErrText">Kunde inte skicka just nu. Testa igen eller ring oss.</p>
      <button type="button" class="cks-elecModalClose" data-close="cksElecErr">St√§ng</button>
    </div>
  </div>

  <!-- Footer injectas -->
  <div id="site-footer"></div>

  <script src="./include.js"></script>
  <script src="./app.js"></script>

  <!-- Page script (DEMO submit + modal) -->
  <script>
    (function(){
      const form = document.getElementById('cksElecForm');
      const reg  = document.getElementById('elecRegnr');

      const okModal  = document.getElementById('cksElecOk');
      const errModal = document.getElementById('cksElecErr');
      const errText  = document.getElementById('cksElecErrText');

      const btn  = document.getElementById('elecBtn');
      const spin = document.getElementById('elecSpin');
      const btxt = document.getElementById('elecBtnText');

      function setLoading(on){
        if(!btn) return;
        btn.disabled = !!on;
        if(spin) spin.style.display = on ? 'inline-block' : 'none';
        if(btxt) btxt.textContent = on ? 'Skickar‚Ä¶' : 'Skicka';
      }

      function openModal(m){
        if(!m) return;
        m.style.display = 'flex';
        m.setAttribute('aria-hidden','false');
      }
      function closeModal(m){
        if(!m) return;
        m.style.display = 'none';
        m.setAttribute('aria-hidden','true');
      }

      // close buttons + click outside
      document.addEventListener('click', (e) => {
        const id = e.target?.getAttribute?.('data-close');
        if(!id) return;
        const m = document.getElementById(id);
        closeModal(m);
      });
      [okModal, errModal].forEach(m => {
        if(!m) return;
        m.addEventListener('click', (e) => { if(e.target === m) closeModal(m); });
      });
      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape'){ closeModal(okModal); closeModal(errModal); }
      });

      // reg uppercase
      if(reg){
        reg.addEventListener('input', () => {
          reg.value = reg.value.replace(/\s+/g,'').toUpperCase();
        });
      }

      if(!form) return;

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        if(!form.checkValidity()){
          form.reportValidity();
          return;
        }

        // honeypot
        const hp = (new FormData(form).get('website') || '').toString().trim();
        if(hp){
          // ‚Äútyst‚Äù fail
          return;
        }

        setLoading(true);

        try{
          // DEMO: simulera kort delay och visa OK
          await new Promise(r => setTimeout(r, 450));
          openModal(okModal);
          form.reset();
        } catch(err){
          if(errText) errText.textContent = 'Kunde inte skicka just nu. Testa igen eller ring oss.';
          openModal(errModal);
        } finally {
          setLoading(false);
        }
      });
    })();
  </script>

</body>
</html>
